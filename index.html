<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Drag Race Season Simulator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="app">
    <h1>Drag Race Season Simulator</h1>

    <section class="controls">
      <div class="control-row">
        <label>
          Mode:
          <select id="modeSelect">
            <option value="normal">Normal</option>
            <option value="chaos">Chaos</option>
          </select>
        </label>
      </div>

      <div class="control-row">
        <label>
          Queens JSON:
          <textarea id="queensInput" rows="10" spellcheck="false"></textarea>
        </label>
      </div>

      <div class="control-row">
        <button id="loadDefaultQueens">Load sample cast</button>
        <button id="simulateButton">Simulate Season</button>
      </div>
    </section>

    <section class="output">
      <h2>Season Output</h2>
      <pre id="outputLog"></pre>
    </section>
  </main>

  <!-- 1) Load data FIRST -->
  <script src="challenges.js"></script>
  <script src="queens.js"></script>

  <!-- 2) Load simulator core -->
  <script src="sim.js"></script>

  <!-- 3) UI glue -->
  <script>
    const queensInput = document.getElementById("queensInput");
    const modeSelect = document.getElementById("modeSelect");
    const loadDefaultBtn = document.getElementById("loadDefaultQueens");
    const simulateBtn = document.getElementById("simulateButton");
    const outputLog = document.getElementById("outputLog");

    // Load default queens into the textarea
    loadDefaultBtn.addEventListener("click", () => {
      if (!window.DEFAULT_QUEENS) {
        outputLog.textContent = "Error: DEFAULT_QUEENS not loaded.";
        return;
      }
      queensInput.value = JSON.stringify(window.DEFAULT_QUEENS, null, 2);
    });

    // Run the simulator
    simulateBtn.addEventListener("click", () => {
      let queens;
      try {
        queens = JSON.parse(queensInput.value);
      } catch (err) {
        outputLog.textContent = "Invalid Queens JSON:\n\n" + err;
        return;
      }

      const mode = modeSelect.value; // "normal" | "chaos"
      const result = window.simulate
